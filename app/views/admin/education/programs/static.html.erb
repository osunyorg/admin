---
<%
teacher_involvements = @about.university_person_involvements
                             .includes(:person)
                             .ordered_by_name
administrator_involvements = @about.involvements_through_roles
                                   .includes(:person)
                                   .ordered_by_name
%>
title: >
  <%= @about.name %>
<%= render 'admin/application/static/permalink' %>
<%= render 'admin/application/static/design', full_width: false, toc_offcanvas: true, toc_present: true %>
<%= render 'admin/application/static/breadcrumbs', 
            pages: @website.special_page(Communication::Website::Page::EducationProgram).ancestors_and_self,
            current: @about %>
<% if @about.downloadable_summary.attached? %>
downloadable_summary: <%= @about.downloadable_summary.blob_id %>
<% end %>
registration_url: >
  <%= @about.registration_url %>
<%= render 'admin/application/meta_description/static' %>
<%= render 'admin/application/summary/static' %>
presentation: >
  <%= prepare_text_for_static @about.presentation %>
position: <%= @about.position %>
<% if @about.parent %>
parent:
  title: >
    <%= @about.parent.name %>
  url: <%= @about.parent.current_permalink_in_website(@website)&.path %>
<% end %>
<%= render 'admin/application/featured_image/static' %>
related_category: "<%= @website.categories.find_by(program_id: @about.id)&.slug_with_ancestors_slugs %>"
diplomas: "<%= @about.diploma&.slug %>"
teachers:
<% teacher_involvements.each do |involvement| %>
  - "<%= involvement.person.slug %>"
<% end %>
teachers_description:
<% teacher_involvements.each do |involvement| %>
  "<%= involvement.person.slug %>": >
    <%= involvement.description %>
<% end %>
<% if administrator_involvements.any? %>
administrators:
<% administrator_involvements.each do |involvement| %>
  - "<%= involvement.person.slug %>"
<% end %>
administrators_description:
<% administrator_involvements.each do |involvement| %>
  "<%= involvement.person.slug %>": >
    <%= involvement.target.to_s %>
<% end %>
roles:
<% @about.university_roles.ordered.each do |role| %>
  - title: >
      <%= role.to_s %>
    persons:
    <% role.involvements.includes(:person).ordered.each do |involvement| %>
      - "<%= involvement.person.slug %>"
    <% end %>
<% end %>
<% else %>
roles: []
<% end %>
capacity: <%= @about.capacity %>
continuing: <%= @about.continuing %>
initial: <%= @about.initial %>
apprenticeship: <%= @about.apprenticeship %>
<%
[
  :accessibility,
  :contacts,
  :content,
  :evaluation,
  :objectives,
  :opportunities,
  :other,
  :pedagogy,
  :prerequisites,
  :pricing,
  :registration,
  :results
].each do |property| %>
<%= property.to_s %>: >
  <%= prepare_html_for_static @about.send("best_#{property}"), @about.university %>
<% end %>
<%= render 'admin/communication/blocks/content/static', about: @about %>
---
