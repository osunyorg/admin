<%
# @l10n is a localization facet University::Person::Localization::Researcher
person = @l10n.about
person_l10n = @l10n.person_l10n
language = @l10n.language
title = t('university.person.facets.researcher.publications_of', name: @l10n.to_s, locale: @l10n.language.iso_code)
breadcrumb_title = t('university.person.facets.researcher.publications', locale: @l10n.language.iso_code)
%>---
<%= render 'admin/application/static/core', about: @l10n, forced_title: title %>
<%= render 'admin/application/static/breadcrumbs', about: person_l10n, last_item: breadcrumb_title %>
<%= render 'admin/application/static/design', about: person, l10n: @l10n, full_width: true, toc_offcanvas: true %>
<%= osuny_static_text 'person', person_l10n.to_s %>
<%= osuny_static_text 'first_name', person_l10n.first_name %>
<%= osuny_static_text 'last_name', person_l10n.last_name %>
<%= render 'admin/application/l10n/static', about: @l10n %>
<%= osuny_static_text 'meta_description', person_l10n.meta_description %>
<%= osuny_static_html 'summary', person_l10n.summary %>
publications:
<%
HalOpenscience::Document::TYPES.each do |type|
  publications = person.publications.where(doctype: type).ordered
  next if publications.none?
  %>
  - type: "<%= type %>"
    label: "<%= t("hal_openscience.document.type.#{type}.other", locale: :fr) %>"
    count: <%= publications.count %>
    publications:
<%
  publications.find_each do |publication|
    hugo = publication.hugo(@website)
    next if hugo.nil? || hugo.file.blank?
    %>
<%= render 'admin/application/static/hugo/single', hugo: hugo, depth: 3 %>
<%
  end
end
%>
---
